{"version":3,"sources":["images/logo.svg","components/library/authenticator.ts","components/library/enums/enums.ts","components/library/spotify-adapter.ts","components/chart-area/ChartArea.tsx","components/graph-area/GraphArea.tsx","components/app/App.tsx","serviceWorker.ts","index.tsx"],"names":["module","exports","Authenticator","client_id","redirect_uri","scopes","state","this","generateRandomString","auth_url","encodeURIComponent","access_token","token_type","expires_in","returned_state","stored_state","url_params","URLSearchParams","window","location","hash","replace","get","localStorage","getItem","setItem","href","length","text","possible","i","charAt","Math","floor","random","_instance","TimeRange","Passport","Instance","SpotifyAdapter","app","logIn","limit","offset","time_range","medium_term","console","log","url","params","headers","method","fetch","then","res","json","data","tracks","items","setState","curr_track","id","uri","split","pop","encodeURI","audio_features","curr_audio_features","isLoggedIn","ChartArea","props","track","className","dataKey","angle","domain","tick","name","stroke","fill","fillOpacity","scaleToFit","src","image","alt","target","rel","external_urls","spotify","album","images","updateChartArea","prevProps","prevState","tempo","valence","danceability","acousticness","Component","GraphArea","nodes","edges","push","label","title","to","from","graph","first","options","layout","improvedLayout","hierarchical","color","interaction","zoomView","height","events","selectNode","event","_updateCurrTrack","getNetwork","network","adapter","getAudioFeature","App","changeTheme","dark","loggedIn","query_top_limit","query_top_offset","query_top_timerange","short_term","appGraphArea","logo","icon","faAdjust","onClick","getTopTracks","Boolean","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.15abdae4.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";","class Authenticator {\r\n  /**\r\n   * params to make authentication request\r\n   */\r\n  private static _instance: Authenticator;\r\n  private client_id: string = '287daee6bafd4ce48e000a00a40d3f6f';\r\n  // private redirect_uri: string = 'http://39e31bb933c1.ngrok.io';\r\n  private redirect_uri: string = 'http://kevinshi97.github.io/spotify-web';\r\n  private scopes: string = 'user-top-read user-follow-read user-library-read';\r\n  private state: string = this.generateRandomString(16);\r\n  private auth_url: string = 'https://accounts.spotify.com/authorize?response_type=token&client_id=' + encodeURIComponent(this.client_id)\r\n    + '&redirect_uri=' + encodeURIComponent(this.redirect_uri) + '&state=' + encodeURIComponent(this.state)\r\n    + '&scope=' + encodeURIComponent(this.scopes);\r\n  \r\n  /**\r\n   * params returned by authentication, may be used in the remaing API calls\r\n   */\r\n  public access_token: string | null = null;\r\n  public token_type: string | null = null;\r\n  public expires_in: string | null = null;\r\n  public returned_state: string | null = null;\r\n  public stored_state: string | null = null;\r\n  \r\n  private constructor() {\r\n    let url_params = new URLSearchParams(window.location.hash.replace(\"#\",\"?\"))\r\n    this.access_token = url_params.get('access_token');\r\n    this.token_type = url_params.get('token_type');\r\n    this.expires_in = url_params.get('expires_in');\r\n    this.returned_state = url_params.get('state');\r\n    this.stored_state = localStorage.getItem('spotify_auth_state')\r\n  }\r\n\r\n  public static get Instance(): Authenticator {\r\n    return this._instance || (this._instance = new this()); \r\n  }\r\n\r\n  public get isLoggedIn(): Boolean {\r\n    return (this.access_token && this.stored_state === this.returned_state) || false;\r\n  }\r\n\r\n  public logIn(): void {\r\n    localStorage.setItem('spotify_auth_state', this.state)\r\n    window.location.href = this.auth_url;\r\n  }\r\n\r\n  private generateRandomString(length: number): string {\r\n    let text: string = '';\r\n    var possible: string = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n  \r\n    for (let i: number = 0; i < length; i++) {\r\n      text += possible.charAt(Math.floor(Math.random() * possible.length));\r\n    }\r\n    return text;\r\n  };\r\n\r\n}\r\n\r\nexport const Passport = Authenticator.Instance;","export enum TimeRange {\r\n  short_term = 'short_term',\r\n  medium_term = 'medium_term',\r\n  long_term = 'long_term'\r\n}","import {Component} from 'react';\r\n\r\nimport { Passport } from './authenticator';\r\nimport { IProps, IState} from './interfaces/IApp';\r\nimport { TimeRange } from './enums/enums';\r\nimport { Artist } from './interfaces/IArtist';\r\nimport { Track, AudioFeatures } from './interfaces/ISpotifyObjects';\r\n\r\nexport class SpotifyAdapter {\r\n  public access_token: string | null = null;\r\n  public token_type: string | null = null;\r\n  public expires_in: string | null = null;\r\n  public returned_state: string | null = null;\r\n  public stored_state: string | null = null;\r\n  private app: Component<IProps, IState>;\r\n\r\n  constructor(app: Component<IProps, IState>) {\r\n    this.app = app;\r\n    this.access_token = Passport.access_token;\r\n    this.token_type = Passport.token_type;\r\n    this.expires_in = Passport.expires_in;\r\n    this.returned_state = Passport.returned_state;\r\n    this.stored_state = Passport.stored_state;\r\n  }\r\n  public get isLoggedIn(): Boolean {\r\n    return Passport.isLoggedIn;\r\n  }\r\n  public logIn(): void {\r\n    Passport.logIn();\r\n  }\r\n\r\n  public getTopTracks(limit: number = 20, offset: number = 0, time_range: TimeRange = TimeRange.medium_term): void {\r\n    if (limit < 1 || limit > 50 || offset < 0 || offset > limit) {\r\n      console.log('invalid params');\r\n    } else {\r\n      const url = 'https://api.spotify.com/v1/me/top/tracks?&limit=' + encodeURIComponent(limit) + '&offset=' + encodeURIComponent(offset) + '&time_range='\r\n        + encodeURIComponent(time_range);\r\n      const params: RequestInit = {\r\n        headers: {'Authorization': 'Bearer ' + this.access_token} as HeadersInit, \r\n        method: 'GET',\r\n      }\r\n      fetch(url, params)\r\n        .then(res => res.json())\r\n        .then((data) => {\r\n          const tracks = data.items as Track[]\r\n          this.app.setState({ tracks: tracks, curr_track: tracks[0] || null})\r\n          console.log(this.app.state.tracks);\r\n          console.log(this.app.state.curr_track);\r\n      })\r\n    }\r\n  }\r\n\r\n  public getAudioFeature(curr_track: Track): void {\r\n    const id: string = curr_track.uri.split(':').pop() || '';\r\n    console.log(id);\r\n    const url = 'https://api.spotify.com/v1/audio-features/'+encodeURI(id);\r\n    const params: RequestInit = {\r\n      headers: {'Authorization': 'Bearer ' + this.access_token} as HeadersInit, \r\n      method: 'GET',\r\n    }\r\n    fetch(url, params)\r\n      .then(res => res.json())\r\n      .then((data) => {\r\n        const audio_features = data as AudioFeatures\r\n        console.log(audio_features);\r\n        this.app.setState({ curr_audio_features: audio_features });\r\n        // console.log(this.app.state.curr_audio_features);\r\n    })\r\n  }\r\n}","import { RadarChart, PolarGrid, PolarAngleAxis, PolarRadiusAxis, Radar, Legend, ResponsiveContainer, Text} from 'recharts';\r\nimport React, {Component} from 'react';\r\nimport { IChartAreaProps, IChartAreaState } from '../library/interfaces/IApp';\r\n\r\nimport './ChartArea.css';\r\n\r\nexport class ChartArea extends Component<IChartAreaProps, IChartAreaState> {\r\n  constructor(props: IChartAreaProps) {\r\n    super(props);\r\n    this.state = {\r\n      audio_features: this.props.audio_features,\r\n      track: this.props.track,\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"container\">\r\n        <div className=\"chart-container\">\r\n          <ResponsiveContainer>\r\n            <RadarChart data={this.state.data}>\r\n              <PolarGrid />\r\n              <PolarAngleAxis dataKey=\"feature\" />\r\n              <PolarRadiusAxis angle={18} domain={[0, 1]} tick={false}/>\r\n              <Radar name={this.props.track ? this.props.track.name : ''}\r\n                dataKey=\"A\" stroke=\"#82ca9d\" fill=\"#82ca9d\" fillOpacity={0.6} />\r\n              {/* <Legend /> */}\r\n              <Text scaleToFit={true}/>\r\n            </RadarChart>\r\n          </ResponsiveContainer>\r\n        </div>\r\n        <div className='song-container'>\r\n          <img src={this.state.image} className=\"album-logo\" alt=\"logo\" />\r\n          <a href={this.state.url} target=\"_blank\" rel=\"noopener noreferrer\">{this.state.name}</a>        \r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.props.track) {\r\n      if (this.props.track.external_urls && this.props.track.name) {\r\n        this.setState({ name: this.props.track.name, url: this.props.track.external_urls.spotify || '#' });\r\n      }\r\n      if (this.props.track.album.images) {\r\n        this.setState({ image: this.props.track.album.images[0].url });\r\n      }\r\n    }\r\n    if (this.props.audio_features) {\r\n      this.updateChartArea()\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps: IChartAreaProps, prevState: IChartAreaState) {\r\n    if (this.props.track && this.props.track !== prevProps.track) {\r\n      if (this.props.track.external_urls && this.props.track.name) {\r\n        this.setState({ name: this.props.track.name, url: this.props.track.external_urls.spotify || '#' });\r\n      }\r\n      if (this.props.track.album.images) {\r\n        this.setState({ image: this.props.track.album.images[0].url });\r\n      }\r\n    }\r\n    if (this.props.audio_features && this.props.audio_features !== prevProps.audio_features) {\r\n      this.updateChartArea()\r\n    }\r\n  }\r\n\r\n  public updateChartArea() {\r\n    // const major: number = this.props.audio_features?.mode || 0\r\n    // const bpm: number = this.props.audio_features?.tempo || 0\r\n    const tempo = this.props.audio_features?.tempo || 0\r\n    // const nchords: number = 3 //idk how to get the chords, this was a wash :/\r\n    // const nchords: number = this.props.audio_features?.key || 0\r\n    // const upbeatness: number = (60 + Math.pow(0.00165 * bpm - 120, 2) + (4.376 * major) + (0.78 * nchords) - (major * nchords)) / 100\r\n    const data = [\r\n      { \"feature\": \"valence\", \"A\": this.props.audio_features?.valence, \"fullMark\": 1 },\r\n      { \"feature\": \"danceability\", \"A\": this.props.audio_features?.danceability, \"fullMark\": 1 },\r\n      { \"feature\": \"energy\", \"A\": this.props.audio_features?.danceability, \"fullMark\": 1 },\r\n      { \"feature\": \"acousticness\", \"A\": this.props.audio_features?.acousticness, \"fullMark\": 1 },\r\n      { \"feature\": \"tempo\", \"A\": tempo/250, \"fullMark\": 1 },\r\n    ];\r\n    this.setState({ data: data }, () => {\r\n      console.log('here');\r\n      console.log(this.state.data);\r\n      console.log(data);\r\n    });\r\n  }\r\n\r\n\r\n}\r\n\r\n/**\r\n * Rating = 60 + (0.00165 * BPM – 120)^2 + (4.376 * Major) + 0.78 * nChords – (Major * nChords)\r\n */","import React, {Component} from 'react';\r\nimport ReactDOM from \"react-dom\";\r\nimport Graph from \"react-graph-vis\";\r\nimport { IGraphAreaProps, IGraphAreaState } from '../library/interfaces/IApp';\r\nimport { IGraph, INode, IEdge } from '../library/interfaces/IGraph';\r\nimport { ChartArea } from '../chart-area/ChartArea';\r\nimport { Track, AudioFeatures } from '../library/interfaces/ISpotifyObjects';\r\nimport { SpotifyAdapter } from '../library/spotify-adapter';\r\n \r\n// import \"./styles.css\";\r\n// need to import the vis network css in order to show tooltip\r\n// import \"./network.css\";\r\n \r\nexport class GraphArea extends Component<IGraphAreaProps, IGraphAreaState> {\r\n  \r\n  constructor(props: IGraphAreaProps) {\r\n    let nodes: INode[] = [];\r\n    let edges: IEdge[] = [];\r\n    if (props.tracks) {\r\n      for (let i = 0; i < props.tracks.length; i++) {\r\n        nodes.push({ id: i + 1, label: props.tracks[i].name, title: props.tracks[i].name } as INode);\r\n        if (i > 1) {\r\n          edges.push({ to: i - 1, from: i } as IEdge);\r\n        }\r\n      }\r\n    }\r\n    super(props);\r\n    this.state = {\r\n      tracks: this.props.tracks,\r\n      curr_track: this.props.curr_track,\r\n      curr_audio_features: this.props.curr_audio_features,\r\n      graph: { nodes: nodes, edges: edges }\r\n    }\r\n  }\r\n \r\n  public _updateCurrTrack(nodes: number[]) {\r\n    console.log(nodes);\r\n    let first: number = nodes[0] - 1\r\n    this.setState({curr_track: this.state.tracks ? this.state.tracks[first] : this.state.curr_track})\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Graph\r\n          graph={this.state.graph}\r\n          options={{\r\n            layout: {\r\n              improvedLayout: true,\r\n              hierarchical: false\r\n            },\r\n            edges: {\r\n              color: \"#000000\"\r\n            },\r\n            interaction: {\r\n              zoomView: true\r\n            },\r\n            height: \"500px\"\r\n          }}\r\n          events={{\r\n            // selectNode: function(event: any) {\r\n            //   let { nodes, edges } = event;\r\n            //   console.log(nodes);\r\n            //   this.\r\n            // }\r\n            selectNode: (event: any) => {\r\n              let { nodes, edges } = event;\r\n              this._updateCurrTrack(nodes);\r\n            }\r\n          }}\r\n          getNetwork={network => {\r\n            //  if you want access to vis.js network api you can set the state in a parent component using this property\r\n          }}\r\n        />\r\n        <ChartArea audio_features={this.state.curr_audio_features} track={this.state.curr_track}/>\r\n      </div>  \r\n    );\r\n  }\r\n\r\n  componentDidUpdate(prevProps: IGraphAreaProps, prevState: IGraphAreaState) {\r\n    const adapter: SpotifyAdapter = new SpotifyAdapter(this);\r\n    if (this.state.tracks && this.state.curr_track !== prevState.curr_track) {\r\n      adapter.getAudioFeature(this.state.curr_track!);\r\n    }\r\n  }\r\n\r\n}\r\n \r\n// const rootElement = document.getElementById(\"root\");\r\n// ReactDOM.render(<App />, rootElement);\r\n ","import React, {Component} from 'react';\nimport logo from '../../images/logo.svg';\nimport './App.css';\n// import { Button } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faAdjust } from '@fortawesome/free-solid-svg-icons'\n// import { access } from 'fs';\n// import * as icons from '@fortawesome/free-solid-svg-icons';\nimport {IAppProps, IAppState} from '../library/interfaces/IApp'\nimport { SpotifyAdapter } from '../library/spotify-adapter';\nimport { TimeRange } from '../library/enums/enums';\nimport { GraphArea } from '../graph-area/GraphArea';\n\nclass App extends Component<IAppProps, IAppState> {\n  constructor(props: IAppProps) {\n    super(props);\n    this.state = {\n      loggedIn: false,\n      dark: false,\n      query_top_limit: 50,\n      query_top_offset: 0,\n      query_top_timerange: TimeRange.short_term,\n      // tracks: [],\n      // curr_track: null,\n      // curr_audio_features: null\n    };\n  }\n\n  changeTheme = () => {\n    this.setState({ dark: !this.state.dark });\n    // console.log(this.state);\n  }\n\n\n  render() {\n    let appGraphArea\n    if (this.state.tracks && this.state.curr_audio_features) {\n      appGraphArea = <GraphArea tracks={this.state.tracks}\n        curr_track={this.state.curr_track}\n        curr_audio_features={this.state.curr_audio_features} />\n    } else {\n      appGraphArea = <div />\n    }\n    return (\n      <div className=\"App\">\n        <header className={`App-header ${ this.state.dark? '' : 'dark'}`}>\n          <img src={logo} className=\"App-logo\" alt=\"logo\" />\n          <p>\n            Edit <code>src/App.tsx</code> and save to reload.\n          </p>\n          {/* <a href={auth_url} style={this.state.loggedIn? {pointerEvents: 'none'} : {pointerEvents: 'auto'}}>\n            {this.state.loggedIn? 'Signed In' : 'Sign In'} <FontAwesomeIcon icon={faSignInAlt} />\n          </a> */}\n          {/* <a\n            className=\"App-link\"\n            href=\"https://reactjs.org\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Learn React\n          </a> */}\n          {/* <Button variant=\"primary\" onClick={this.changeTheme}><FontAwesomeIcon icon={faAdjust} /></Button>{' '} */}\n          {/* <GraphArea tracks={this.state.tracks}/> */}\n          {appGraphArea }\n          <FontAwesomeIcon id=\"dar-mode-btn\" icon={faAdjust} onClick={this.changeTheme} />\n        </header>\n      </div>\n    )\n  }\n  componentDidMount() {\n    const adapter: SpotifyAdapter = new SpotifyAdapter(this);\n    if (adapter.isLoggedIn) {\n      this.setState({ loggedIn: true });\n      // console.log('logged in');\n      // console.log('access_token: ', adapter.access_token);\n      // console.log('token_type: ', adapter.token_type);\n      // console.log('expires_in: ', adapter.expires_in);\n      // console.log('returned_state: ', adapter.returned_state);\n      // console.log('local_state: ', adapter.stored_state);\n      adapter.getTopTracks(this.state.query_top_limit, this.state.query_top_offset, this.state.query_top_timerange);\n\n    } else {\n      console.log('not logged in');\n      adapter.logIn();\n    }\n  }\n  componentDidUpdate(prevProps: IAppProps, prevState: IAppState) {\n    const adapter: SpotifyAdapter = new SpotifyAdapter(this);\n    if (this.state.tracks && this.state.curr_track !== prevState.curr_track) {\n      adapter.getAudioFeature(this.state.curr_track!);\n    }\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport {App} from './components';\nimport * as serviceWorker from './serviceWorker';\nimport 'bootstrap/dist/css/bootstrap.css';\n// import { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n    {/* <AppRouter /> */}\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// function AppRouter() {\n//   return (\n//     <Router>\n//        <Route path=\"/\" exact component={Auth} />\n//        <Route path=\"/web\" component={App} />\n//    </Router>\n//   );\n// }\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}