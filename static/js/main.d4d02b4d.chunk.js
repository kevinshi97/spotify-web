(this["webpackJsonpspotify-web"]=this["webpackJsonpspotify-web"]||[]).push([[0],{13:function(t,e,n){t.exports=n(26)},18:function(t,e,n){},19:function(t,e,n){},26:function(t,e,n){"use strict";n.r(e);var o=n(1),s=n.n(o),i=n(7),a=n.n(i),r=(n(18),n(2)),c=n(3),l=n(12),h=n(11),u=n(8),p=n.n(u),d=(n(19),n(9)),_=n(10),m=function(){function t(){Object(r.a)(this,t),this.client_id="287daee6bafd4ce48e000a00a40d3f6f",this.redirect_uri="http://kevinshi97.github.io/spotify-web",this.scopes="user-top-read user-follow-read user-library-read",this.state=this.generateRandomString(16),this.auth_url="https://accounts.spotify.com/authorize?response_type=token&client_id="+encodeURIComponent(this.client_id)+"&redirect_uri="+encodeURIComponent(this.redirect_uri)+"&state="+encodeURIComponent(this.state)+"&scope="+encodeURIComponent(this.scopes),this.access_token=null,this.token_type=null,this.expires_in=null,this.returned_state=null,this.stored_state=null;var e=new URLSearchParams(window.location.hash.replace("#","?"));this.access_token=e.get("access_token"),this.token_type=e.get("token_type"),this.expires_in=e.get("expires_in"),this.returned_state=e.get("state"),this.stored_state=localStorage.getItem("spotify_auth_state")}return Object(c.a)(t,[{key:"logIn",value:function(){localStorage.setItem("spotify_auth_state",this.state),window.location.href=this.auth_url}},{key:"generateRandomString",value:function(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=0;o<t;o++)e+=n.charAt(Math.floor(Math.random()*n.length));return e}},{key:"isLoggedIn",get:function(){return this.access_token&&this.stored_state==this.returned_state||!1}}],[{key:"Instance",get:function(){return this._instance||(this._instance=new this)}}]),t}();m._instance=void 0;var g,f=m.Instance;!function(t){t.short_term="short_term",t.medium_term="medium_term",t.long_term="long_term"}(g||(g={}));var v=function(){function t(e){Object(r.a)(this,t),this.access_token=null,this.token_type=null,this.expires_in=null,this.returned_state=null,this.stored_state=null,this.app=void 0,this.app=e,this.access_token=f.access_token,this.token_type=f.token_type,this.expires_in=f.expires_in,this.returned_state=f.returned_state,this.stored_state=f.stored_state}return Object(c.a)(t,[{key:"logIn",value:function(){f.logIn()}},{key:"getTopArtists",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g.medium_term;this.SpotifyTopRequest("https://api.spotify.com/v1/me/top/artists?",t,e,n)}},{key:"getTopTracks",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g.medium_term;this.SpotifyTopRequest("https://api.spotify.com/v1/me/top/tracks?",t,e,n)}},{key:"SpotifyTopRequest",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3?arguments[3]:void 0;if(n<1||n>50||o<0||o>n)console.log("invalid params");else{var i=t+"&limit="+encodeURIComponent(n)+"&offset="+encodeURIComponent(o)+"&time_range="+encodeURIComponent(s),a={headers:{Authorization:"Bearer "+this.access_token},method:"GET"};fetch(i,a).then((function(t){return t.json()})).then((function(t){e.app.setState({data:t}),console.log(t),console.log(e.app.state)}))}}},{key:"isLoggedIn",get:function(){return f.isLoggedIn}}]),t}(),y=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var o;return Object(r.a)(this,n),(o=e.call(this,t)).changeTheme=function(){o.setState({dark:!o.state.dark}),console.log(o.state)},o.state={loggedIn:!1,dark:!1,query_top_limit:50,query_top_offset:0,query_top_timerange:g.medium_term},o}return Object(c.a)(n,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement("header",{className:"App-header ".concat(this.state.dark?"":"dark")},s.a.createElement("img",{src:p.a,className:"App-logo",alt:"logo"}),s.a.createElement("p",null,"Edit ",s.a.createElement("code",null,"src/App.tsx")," and save to reload."),s.a.createElement(d.a,{icon:_.a,onClick:this.changeTheme})))}},{key:"componentDidMount",value:function(){var t=new v(this);t.isLoggedIn?(this.setState({loggedIn:!0}),t.getTopArtists(this.state.query_top_limit,this.state.query_top_offset,this.state.query_top_timerange),t.getTopTracks(this.state.query_top_limit,this.state.query_top_offset,this.state.query_top_timerange)):(console.log("not logged in"),t.logIn())}}]),n}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(25);a.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},8:function(t,e,n){t.exports=n.p+"static/media/logo.5d5d9eef.svg"}},[[13,1,2]]]);
//# sourceMappingURL=main.d4d02b4d.chunk.js.map